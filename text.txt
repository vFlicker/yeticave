1) inc/сonfig -- здесь находятся данные подключения к БД.

2) inc/functions -- здесь находятся используваемые ф-ции.

3) папка templates -- папка с шаблонами

templates/_paggination -- тут дублируется код, потому что иногда в строке ввода есть GET-параметры, например на странице поиска, и мне пришлось указывать разные ссылки, типа вот так
href=url&page=
или так
href=$url?page=

уверен, что сделал неправильно, но как делать по-уму не додумался.

4) ./config -- тут запускаю начало сессии, меняю аватарку стандартную.
Не знал в какой файл, это нужно засунуть, не нравится, что он лежит на в папке inc.

5) ./init -- тут подключаюсь к БД

6) ./index -- главная страница.

$can_show_top_menu, чтобы не отображалось меню вверху
дальше пагинация
и просто вывод всех лотов из БД

7) ./sign-up -- регистрация.

получаю данные с формы, валидирую их (думаю можно было не писать такую большую ф-цию, а валидировать каждую строку отдельно, ну это не очень важно)

если ошибок нету получаем хэш пароля, регистрируем пользователя и кидаем его на страничку входа

8) ./login -- страница входа.
проверака на валидацию данных, переадресация на главную

9) ./logout -- это выход с учётной записи.

10) ./add-lot -- добавление лота.
просто валидация данних, записываем их в БД.

11) nav_menu -- это меню по категориям

11) ./all-lots -- это то что открывается когда выбираешь категорию.
тоже подключена пагинация и из-за того, что там уже были GET-параметры
?id=1,2,3 и тд. в пагинации так стрёмно всё.

12) ./lot -- это просмотр лота.
вначале кидаем этот лот в куки, чтобы они добавлялись в историю.
(когда меняется пользователь, история остаётся, скорее всего её нужно очищать или как-то по другому хранить просмотренные лоты)

можно добавить ставку, есть валидация, ничего интересно вроде
мне кажется не очень красиво переадресация сделана. так вообще делают?

дальше получение из БД лота, ставок и максимальной ставки
возможно 2 и 3 запросы в БД можно было объеденить, я читал об этом не нашёл точного ответа по этому поводу

13) ./history -- это история просмотров.
сейчас кажется, что пагинацию нужно было выность отделельно, а то 3 раза одно и то же.

ещё видел, что иногда SQL-запросы выносят в одельный файл, типа в массив и потом вызавают их, или когда будет ООП это вообще будет работать по другому всё?

14) ./my-bets -- мои ставки.
тут вопрос только помоему SQL запросу, он нормальный?
я читал об использовании LEFT/RIGHT JOIN, но тут всё работает и без них, хотя когда я искал как это сделать там был использован LEFT JOIN.

15) ./search -- это поиск.
делал через FULLTEXT INDEX.

16) ./getwinner -- определение победителя.
работает немного странно, я сделал так, что отправка на почту происходит только когда заходишь на страницу мои ставки, я думал тут можно реализовать программу Демон, чтобы каждый день в 12 ночи отправляла на почту смс если есть победитель, но решил не стоит усложнять.

должно было быть так, что если кончается врямя лота, человеку чья ставка выиграли приходит смс. но сейчас смс приходит если ты на первом месте в ставках и зашёл на страницу мои лоты.

здесь есть добавляние нового победителя, и если его запишешь в бд, больше скрипт не будет работать, тк. нету кому отправлять данные.
и здесь же сразу отправка на почту.

может же быть так, что в БД запишет, а почта не отправится или наоборот, как от этого обезопаситься? типа как в транзакциях в SQL, но тут же не совсем транзакция, здесь же не 2 запроса в бд, а запрос в БД и отправка на почту, может в БД нужно добавить ещё один столбик отвечающий за то, что смс ушла, делать транзакцию по отправке смс и записи пользователя в БД.

Вроде обо всём спросил.


Зарегистрированные пользователи:
- ignat.v@gmail.com
  ug0GdVMi

- kitty_93@li.ru
  daecNazD

- warrior07@mail.ru
  oixb3aL9